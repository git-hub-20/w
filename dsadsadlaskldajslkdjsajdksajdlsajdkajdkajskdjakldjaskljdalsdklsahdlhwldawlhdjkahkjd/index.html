<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Nástěnka (mock)</title>
  <style>
    :root{
      --bg1:#0b0a22;
      --bg2:#161246;
      --card:#35335d;
      --card2:#3a385f;
      --text:#e9e9f6;
      --muted:#c9c9dc;
      --accent:#4b3bd3;
      --accent2:#6f61ff;
      --pill:#e1574f;
      --chip:#68d4c6;
      --divider:#2b2950;
      --navBg: rgba(28, 22, 63, 0.7);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(110% 80% at 50% 10%, #1f1a57 0%, var(--bg2) 40%, var(--bg1) 100%);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* app frame */
    .app{
      min-height:100dvh;
      padding: env(safe-area-inset-top) 16px calc(92px + env(safe-area-inset-bottom)) 16px;
      max-width: 520px;
      margin: 0 auto;
      position: relative;
    }

    /* status bar */
    .statusbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 2px 10px;
    }

    .time-pill{
      background: var(--pill);
      color: #fff;
      font-weight: 800;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 20px;
      letter-spacing: 0.4px;
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
    }

    .status-icons{
      display:flex;
      align-items:center;
      gap:10px;
      opacity: 0.95;
    }

    .sig{
      display:flex;
      gap:2px;
      align-items:flex-end;
      height: 16px;
    }
    .sig span{display:block; width:3px; border-radius: 2px; background: #fff; opacity: .95}
    .sig span:nth-child(1){height:6px; opacity:.6}
    .sig span:nth-child(2){height:9px; opacity:.75}
    .sig span:nth-child(3){height:12px; opacity:.9}
    .sig span:nth-child(4){height:15px}

    .wifi{
      width: 18px; height: 18px; position: relative;
    }
    .wifi:before, .wifi:after{
      content:"";
      position:absolute;
      left:50%;
      transform: translateX(-50%);
      border:2px solid #fff;
      border-color:#fff transparent transparent transparent;
      border-radius: 50%;
    }
    .wifi:before{top:2px; width:18px; height:18px; opacity:.75}
    .wifi:after{top:6px; width:12px; height:12px; opacity:1}
    .wifi i{
      position:absolute; left:50%; top:13px;
      width:4px; height:4px;
      transform: translateX(-50%);
      background:#fff; border-radius:50%;
    }

    .battery{
      display:flex; align-items:center; gap:6px;
      font-weight: 800;
      font-size: 16px;
    }
    .bat-ico{
      width: 26px; height: 14px;
      border: 2px solid #fff;
      border-radius: 4px;
      position: relative;
    }
    .bat-ico:after{
      content:"";
      position:absolute;
      right:-5px; top:3px;
      width: 3px; height: 6px;
      background:#fff;
      border-radius: 1px;
    }
    .bat-fill{
      position:absolute; left:2px; top:2px; bottom:2px;
      width: 63%;
      background:#fff;
      border-radius:2px;
    }

    /* header title */
    .top{
      position: relative;
      padding: 4px 0 10px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .title{
      font-weight: 800;
      font-size: 34px;
      letter-spacing: 0.4px;
    }

    .top-right{
      position:absolute;
      right: 0;
      display:flex;
      gap: 12px;
      align-items:center;
    }

    .icon-circle{
      width: 54px;
      height: 54px;
      border-radius: 999px;
      background: rgba(78, 72, 122, 0.35);
      border: 2px solid rgba(163, 158, 215, 0.25);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }
    .icon-circle img{width: 26px; height: 26px; opacity: 0.95}
 .cardView .badge{
      position:absolute;
      top:-8px;
      right:-6px;
      background: #f26757;
      color:#fff;
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 14px;
      font-weight: 800;
      border: 2px solid rgba(10,10,30,.25);
    }

    /* sections */
    .section{
      margin-top: 22px;
    }

    .section-head{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      padding: 0 2px;
    }

    .section-title{
      font-size: 30px;
      font-weight: 800;
      display:flex;
      align-items:center;
      gap: 10px;
    }

    .count{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width: 24px;
      height: 24px;
      padding: 0 8px;
      background: var(--chip);
      color: #0c1a1f;
      border-radius: 999px;
      font-weight: 900;
      font-size: 16px;
    }

    .section-link{
      color: var(--text);
      text-decoration: underline;
      text-underline-offset: 5px;
      font-size: 22px;
      opacity: 0.92;
    }

    /* cards */
    .card{
      margin-top: 14px;
      background: rgba(62, 60, 106, 0.65);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 18px;
      padding: 16px;
      display:flex;
      align-items:center;
      gap: 14px;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
    }

    .logo-round{
      width: 56px;
      height: 56px;
      border-radius: 999px;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .logo-round img{width:100%; height:100%}

    .logo-sq{
      width: 58px;
      height: 58px;
      border-radius: 14px;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .logo-sq img{width:100%; height:100%}

    .card-main{flex: 1 1 auto; min-width: 0}
    .card-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .card-title{
      font-size: 26px;
      font-weight: 800;
      letter-spacing: 0.2px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .copy{
      width: 26px; height: 26px;
      opacity: 0.6;
      flex: 0 0 auto;
    }

    .card-sub{
      margin-top: 6px;
      font-size: 26px;
      color: var(--muted);
      opacity: 0.92;
    }

    .card-sub.small{
      font-size: 24px;
      color: var(--text);
      opacity: 0.85;
    }

    .card-date{
      margin-top: 6px;
      font-size: 22px;
      color: var(--muted);
      opacity: 0.9;
    }

    .btn{
      flex: 0 0 auto;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 22px;
      font-weight: 800;
      border: 2px solid rgba(172, 168, 226, 0.45);
      background: rgba(86, 78, 147, 0.1);
      color: var(--text);
    }
    .btn.primary{
      background: var(--accent);
      border-color: rgba(0,0,0,0);
      box-shadow: 0 16px 40px rgba(60, 46, 206, 0.35);
    }

    /* offers bar */
    .offers-bar{
      margin: 26px -16px 0;
      background: #4a3bd0;
      padding: 18px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      border-top: 1px solid rgba(255,255,255,0.1);
      border-bottom: 1px solid rgba(0,0,0,0.12);
    }
    .offers-bar .left{
      display:flex;
      align-items:center;
      gap: 12px;
      font-size: 30px;
      font-weight: 800;
    }
    .offers-bar .right{
      font-size: 26px;
      text-decoration: underline;
      text-underline-offset: 5px;
      opacity: 0.95;
    }

    /* coupon card */
    .coupon-wrap{
      margin-top: 16px;
    }
    .coupon{
      border-radius: 18px;
      overflow:hidden;
      background: #fff;
      box-shadow: 0 22px 60px rgba(0,0,0,.45);
    }
    .coupon img{width:100%; display:block}
    .coupon-footer{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 16px;
      background: #efefef;
      color: #3a3a3a;
      font-weight: 700;
      font-size: 24px;
    }
    .coupon-footer .end{color:#d1782e; font-weight:900}

    /* bottom nav */
    .bottom-nav{
      position: fixed;
      left: 0; right: 0; bottom: 0;
      padding: 10px 14px calc(10px + env(safe-area-inset-bottom));
      display:flex;
      justify-content:center;
      z-index: 50;
      pointer-events:none;
    }

    .nav-inner{
      width: min(520px, calc(100vw - 24px));
      background: var(--navBg);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 28px;
      padding: 10px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
      pointer-events:auto;
    }

    .nav-grid{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      align-items:stretch;
    }

    .nav-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 6px;
      padding: 10px 6px;
      border-radius: 22px;
      color: rgba(255,255,255,0.75);
      text-decoration:none;
      user-select:none;
    }

    .nav-item img{width: 26px; height: 26px; opacity: 0.95}
    .nav-label{font-size: 18px; font-weight: 700}

    .nav-item.active{
      background: rgba(130, 120, 255, 0.22);
      color: #fff;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
    }

    /* small devices */
    @media (max-width: 390px){
      .title{font-size: 30px}
      .section-title{font-size: 26px}
      .section-link{font-size: 20px}
      .card-title{font-size: 22px}
      .card-sub{font-size: 22px}
      .offers-bar .left{font-size: 26px}
      .offers-bar .right{font-size: 22px}
      .coupon-footer{font-size: 20px}
      .btn{font-size: 20px}
    }

    /* prevent selection glow on iOS */
    a, button { -webkit-tap-highlight-color: transparent; }

    button{cursor:pointer}
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="statusbar">
      <div class="time-pill">22:33</div>
      <div class="status-icons" aria-hidden="true">
        <div class="sig"><span></span><span></span><span></span><span></span></div>
        <div class="wifi"><i></i></div>
        <div class="battery">
          <div class="bat-ico"><div class="bat-fill"></div></div>
          <div>63</div>
        </div>
      </div>
    </div>

    <div class="top">
      <div class="title">Nástěnka</div>
      <div class="top-right">
        <button class="icon-circle" id="fsBtn" aria-label="Celá obrazovka" title="Celá obrazovka" id="fsToggleBtn">
          <img id="fsIcon" src="icon-expand.svg" alt="" />
        </button>
        <div class="icon-circle" aria-label="Oznámení">
          <img src="icon-bell.svg" alt="" />
          <div class="badge">99+</div>
        </div>
      </div>
    </div>

    <section class="section">
      <div class="section-head">
        <div class="section-title">Moje průkazy <span class="count">1</span></div>
        <a class="section-link" href="#">Všechny průkazy</a>
      </div>

      <div class="card">
        <div class="logo-round" aria-hidden="true">
          <img src="isic.svg" alt="" />
        </div>
        <div class="card-main">
          <div class="card-row">
            <div class="card-title">S 420 301 484 924 P</div>
            <img class="copy" src="icon-copy.svg" alt="" />
          </div>
          <div class="card-sub">Platí do 31. 12. 2026</div>
        </div>
        <button class="btn primary">Ukázat</button>
      </div>
    </section>

    <section class="section">
      <div class="section-head">
        <div class="section-title">Moje pojištění <span class="count">1</span></div>
        <a class="section-link" href="#">Všechna pojištění</a>
      </div>

      <div class="card">
        <div class="logo-sq" aria-hidden="true">
          <img src="uniqa.svg" alt="" />
        </div>
        <div class="card-main">
          <div class="card-title">ISIC cestovní pojištění - Roční</div>
          <div class="card-sub small"><span id="cardName">Petr Vrána</span></div>
          <div class="card-date">11. 2. 2025 - 10. 2. 2026</div>
        </div>
        <button class="btn">Ukázat</button>
      </div>
    </section>

    <div class="offers-bar">
      <div class="left">Limitované nabídky <span class="count">17</span></div>
      <a class="right" href="#">Zobrazit vše</a>
    </div>

    <div class="coupon-wrap">
      <div class="coupon">
        <img src="coupon.svg" alt="Kupón" />
        <div class="coupon-footer">
          <div class="end">Končí 25. 1. 2026</div>
          <div>Xiaomi</div>
        </div>
      </div>
    </div>
  </div>

  <nav class="bottom-nav" aria-label="Spodní navigace">
    <div class="nav-inner">
      <div class="nav-grid">
        <a class="nav-item active" href="#" aria-current="page">
          <img src="nav-home.svg" alt="" />
          <div class="nav-label">Nástěnka</div>
        </a>
        <a class="nav-item" href="#">
          <img src="nav-sale.svg" alt="" />
          <div class="nav-label">Slevy</div>
        </a>
        <a class="nav-item" href="#">
          <img src="nav-id.svg" alt="" />
          <div class="nav-label">Průkazy</div>
        </a>
        <a class="nav-item" href="#">
          <img src="nav-scan.svg" alt="" />
          <div class="nav-label">Skenování</div>
        </a>
        <a class="nav-item" href="#">
          <img src="nav-profile.svg" alt="" />
          <div class="nav-label">Profil</div>
        </a>
      </div>
    </div>
  </nav>

  <script>
    (function(){
      const btn = document.getElementById('fsBtn');
      const icon = document.getElementById('fsIcon');

      function isFullscreen(){
        return !!(document.fullscreenElement || document.webkitFullscreenElement);
      }

      function setIcon(){
        icon.src = isFullscreen() ? 'icon-contract.svg' : 'icon-expand.svg';
      }

      async function toggleFullscreen(){
        const el = document.documentElement;
        try{
          if (!isFullscreen()){
            if (el.requestFullscreen) await el.requestFullscreen();
            else if (el.webkitRequestFullscreen) await el.webkitRequestFullscreen();
          } else {
            if (document.exitFullscreen) await document.exitFullscreen();
            else if (document.webkitExitFullscreen) await document.webkitExitFullscreen();
          }
        } catch(e){}
        setIcon();
      }

      btn.addEventListener('click', toggleFullscreen);
      document.addEventListener('fullscreenchange', setIcon);
      document.addEventListener('webkitfullscreenchange', setIcon);
      setIcon();
    })();
  </script>
<style>
  .onboarding{position:fixed;inset:0;z-index:9999;display:none;padding:24px 16px;background:radial-gradient(120% 80% at 50% 20%,rgba(255,255,255,0.12),rgba(0,0,0,0)),linear-gradient(180deg,rgba(12,10,30,0.96),rgba(10,8,24,0.98));backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}
  .onboarding__card{max-width:420px;margin:0 auto;border-radius:22px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.10);box-shadow:0 14px 45px rgba(0,0,0,0.35);padding:18px 16px}
  .onboarding__title{font-size:20px;font-weight:700;letter-spacing:.2px;margin:2px 0 12px;color:rgba(255,255,255,0.92)}
  .onboarding__hint{font-size:13px;line-height:1.35;color:rgba(255,255,255,0.68);margin:0 0 14px}
  .onboarding__field{margin:12px 0}
  .onboarding__label{display:block;font-size:12px;margin:0 0 6px;color:rgba(255,255,255,0.72)}
  .onboarding__input{width:100%;border-radius:14px;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.06);color:rgba(255,255,255,0.92);padding:12px;outline:none;font-size:15px}
  .onboarding__input:focus{border-color:rgba(120,90,255,0.55);box-shadow:0 0 0 3px rgba(120,90,255,0.18)}
  .onboarding__row{display:grid;grid-template-columns:92px 1fr;gap:12px;align-items:center}
  .onboarding__preview{width:92px;height:92px;border-radius:14px;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.06);overflow:hidden;display:grid;place-items:center}
  .onboarding__preview img{width:100%;height:100%;object-fit:cover}
  .onboarding__btn{width:100%;margin-top:14px;border:0;border-radius:16px;padding:12px 14px;font-size:15px;font-weight:700;color:#fff;background:linear-gradient(90deg,rgba(122,92,255,1),rgba(86,64,230,1));box-shadow:0 12px 30px rgba(75,52,210,0.35)}
  .onboarding__btn:active{transform:translateY(1px)}
  .onboarding__error{display:none;margin-top:10px;font-size:12px;color:rgba(255,120,120,0.95)}
</style>
<div id="onboarding" class="onboarding" aria-hidden="true">
  <div class="onboarding__card">
    <div class="onboarding__title">Nastavení průkazu</div>
    <div class="onboarding__hint">Nahraj fotku, vyplň jméno a datum narození. Údaje se uloží do zařízení a při příštím otevření se rovnou zobrazí průkaz.</div>

    <div class="onboarding__field onboarding__row">
      <div class="onboarding__preview" id="photoPreview">
        <span style="font-size:12px;color:rgba(255,255,255,0.55);">Foto</span>
      </div>
      <div>
        <label class="onboarding__label" for="photoInput">Fotografie</label>
        <input class="onboarding__input" style="padding:10px 12px" id="photoInput" type="file" accept="image/*" />
      </div>
    </div>

    <div class="onboarding__field">
      <label class="onboarding__label" for="nameInput">Jméno</label>
      <input class="onboarding__input" id="nameInput" type="text" autocomplete="name" placeholder="Např. Jan Novák" />
    </div>

    <div class="onboarding__field">
      <label class="onboarding__label" for="dobInput">Datum narození</label>
      <input class="onboarding__input" id="dobInput" type="date" />
    </div>

    <button class="onboarding__btn" id="saveProfileBtn" type="button">Uložit a zobrazit</button>
    <div class="onboarding__error" id="onboardingError">Vyplň jméno, datum narození a nahraj fotku.</div>
  </div>
</div>
<script>
(function(){
  const STORAGE_KEY = "isic_profile_v1";

  const onboarding = document.getElementById("onboarding");
  const photoInput = document.getElementById("photoInput");
  const nameInput = document.getElementById("nameInput");
  const dobInput = document.getElementById("dobInput");
  const saveBtn = document.getElementById("saveProfileBtn");
  const err = document.getElementById("onboardingError");
  const preview = document.getElementById("photoPreview");

  const cardName = document.getElementById("cardName");
  const cardDob = document.getElementById("cardDob");
  const cardPhoto = document.getElementById("cardPhoto");

  function fmtDobForCard(isoDate){
    if(!isoDate || !/^\d{4}-\d{2}-\d{2}$/.test(isoDate)) return "";
    const parts = isoDate.split("-");
    return parts[2] + "." + parts[1] + "." + parts[0];
  }

  function showOnboarding(){
    onboarding.style.display = "block";
    onboarding.setAttribute("aria-hidden","false");
  }
  function hideOnboarding(){
    onboarding.style.display = "none";
    onboarding.setAttribute("aria-hidden","true");
  }

  function renderProfile(p){
    if(cardName && p.name) cardName.textContent = p.name;
    if(cardDob && p.dob) cardDob.textContent = fmtDobForCard(p.dob);
    if(cardPhoto && p.photoDataUrl){
      cardPhoto.src = p.photoDataUrl;
      cardPhoto.alt = "Profilová fotografie";
    }
  }

  function loadProfile(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return null;
      const p = JSON.parse(raw);
      if(!p || !p.name || !p.dob || !p.photoDataUrl) return null;
      return p;
    }catch(e){ return null; }
  }
  function saveProfile(p){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(p));
  }

  function setPreview(dataUrl){
    preview.innerHTML = "";
    const img = document.createElement("img");
    img.src = dataUrl;
    img.alt = "Náhled fotografie";
    preview.appendChild(img);
  }

  let pendingPhotoDataUrl = "";

  photoInput && photoInput.addEventListener("change", (ev) => {
    err && (err.style.display = "none");
    const file = ev.target.files && ev.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      pendingPhotoDataUrl = String(reader.result || "");
      pendingPhotoDataUrl && setPreview(pendingPhotoDataUrl);
    };
    reader.readAsDataURL(file);
  });

  saveBtn && saveBtn.addEventListener("click", () => {
    err && (err.style.display = "none");
    const name = (nameInput && nameInput.value ? nameInput.value : "").trim();
    const dob = (dobInput && dobInput.value ? dobInput.value : "").trim();
    const photoDataUrl = pendingPhotoDataUrl;

    if(!name || !dob || !photoDataUrl){
      err && (err.style.display = "block");
      return;
    }

    const profile = { name, dob, photoDataUrl };
    saveProfile(profile);
    renderProfile(profile);
    hideOnboarding();
  });

  const existing = loadProfile();
  if(existing){
    renderProfile(existing);
    hideOnboarding();
  }else{
    showOnboarding();
  }
})();
</script>

<style>
  .view--hidden{display:none !important;}

  .cardView{
    position:fixed; inset:0;
    z-index:8000;
    background: radial-gradient(140% 110% at 50% 10%, rgba(255,255,255,0.08), rgba(0,0,0,0) 45%),
                radial-gradient(120% 100% at 50% 100%, rgba(122,92,255,0.25), rgba(0,0,0,0) 50%),
                linear-gradient(180deg, #0b0920 0%, #080718 100%);
    display:none;
  }
  .cardView.is-active{display:block;}
 .cardView__safe{
    width:100%;
    max-width:420px;
    margin:0 auto;
    height:100%;
    padding: 10px 14px 24px;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    gap: 12px;
  }
 .cardView .cardTopBar{
    height:44px;
    border-radius: 14px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.10);
    display:flex;
    align-items:center;
    gap: 10px;
    padding: 0 12px;
    box-sizing:border-box;
  }
 .cardView .cardTopBar__left{display:flex; align-items:center; gap: 10px; min-width:0; flex:1;}
 .cardView .cardTopBar__back{
    width: 26px; height: 26px;
    display:grid; place-items:center;
    border-radius: 10px;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
  }
 .cardView .cardTopBar__dot{
    width:10px; height:10px; border-radius:999px;
    background:#25d366;
    box-shadow: 0 0 0 3px rgba(37,211,102,0.16);
  }
 .cardView .cardTopBar__status{
    font-weight: 800;
    letter-spacing: 0.35px;
    font-size: 12.5px;
    color: rgba(255,255,255,0.92);
  }
 .cardView .cardTopBar__right{
    font-size: 12.5px;
    color: rgba(255,255,255,0.78);
    letter-spacing: 0.25px;
    white-space: nowrap;
  }
 .cardView .cardCanvas{
    flex: 1;
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 4px 0 0;
}
 .cardView .badge{
    background: rgba(255,255,255,0.80);
    border-radius: 10px;
    padding: 8px 10px;
    box-shadow: 0 10px 18px rgba(0,0,0,0.12);
    display:flex;
    gap: 10px;
    align-items:center;
  }
 .cardView .badge__logo{
    width: 38px; height: 38px;
    border-radius: 999px;
    display:grid; place-items:center;
    background: #6fe2d0;
    color: rgba(0,0,0,0.65);
    font-weight: 900;
    letter-spacing: 0.5px;
    font-size: 12px;
  }
 .cardView .badge__txt1{
    font-size: 9px;
    letter-spacing: 0.8px;
    color: rgba(0,0,0,0.70);
    font-weight: 900;
    line-height: 1.05;
  }
 .cardView .badge__txt2{
    font-size: 10px;
    letter-spacing: 0.35px;
    color: rgba(0,0,0,0.62);
    font-weight: 800;
    margin-top: 2px;
  }

  /* Variant A (portrait) */
 .cardView .isicCard{
    width: 100%;
    max-width: 360px;
    aspect-ratio: 0.74 / 1;
    border-radius: 28px;
    box-shadow: 0 26px 60px rgba(0,0,0,0.45);
    overflow:hidden;
    position:relative;
    border: 1px solid rgba(255,255,255,0.10);

    /* hard-edged shapes (no teal blur) */
    background:
      linear-gradient(135deg,
        rgba(255,255,255,0.38) 0%,
        rgba(255,255,255,0.38) 18%,
        rgba(255,255,255,0.00) 18%,
        rgba(255,255,255,0.00) 100%),
      linear-gradient(180deg,
        #f1dec3 0%,
        #f1dec3 32%,
        #9adccb 32%,
        #9adccb 100%);
}
 .cardView .isicCard::after{
    content:"";
    position:absolute; inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.10));
    pointer-events:none;
}
 .cardView .isicCard__headerBadge{position:absolute; top: 18px; left: 18px;}
 .cardView .isicCard__number{
    position:absolute;
    top: 20px; right: 20px;
    font-size: 9.5px;
    color: rgba(0,0,0,0.55);
    letter-spacing: 0.25px;
    text-align:right;
    font-weight: 700;
  }
 .cardView .isicCard__number span{
    display:block;
    font-size: 11px;
    letter-spacing: 0.7px;
    font-weight: 900;
  }
 .cardView .portraitWrap{
    position:absolute;
    top: 84px;
    left: 50%;
    transform: translateX(-50%);
    width: 132px;
    height: 132px;
    border-radius: 18px;
    background: rgba(255,255,255,0.55);
    box-shadow: 0 16px 30px rgba(0,0,0,0.16);
    display:grid;
    place-items:center;
    overflow:hidden;
  }
 .cardView .portraitWrap img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: saturate(1.05) contrast(1.03);
  }
 .cardView .isicCard__name{
    position:absolute;
    top: 226px;
    left: 22px; right: 22px;
    text-align:center;
    font-size: 24px;
    font-weight: 900;
    color: rgba(0,0,0,0.60);
    letter-spacing: 0.2px;
  }
 .cardView .isicCard__school{
    position:absolute;
    top: 262px;
    left: 22px; right: 22px;
    text-align:center;
    font-size: 13px;
    font-weight: 800;
    color: rgba(0,0,0,0.48);
  }
 .cardView .metaRow{
    position:absolute;
    top: 320px;
    left: 24px; right: 24px;
    display:flex;
    justify-content:space-between;
    gap: 16px;
  }
 .cardView .meta{
    width: 48%;
    color: rgba(0,0,0,0.45);
    font-size: 10.5px;
    font-weight: 800;
    letter-spacing: 0.15px;
  }
 .cardView .meta__label{opacity: 0.9;}
 .cardView .meta__value{
    margin-top: 6px;
    font-size: 14px;
    font-weight: 900;
    color: rgba(0,0,0,0.52);
    letter-spacing: 0.3px;
  }
 .cardView .qrWrap{
    position:absolute;
    bottom: 62px;
    left: 50%;
    transform: translateX(-50%);
    width: 150px; height: 150px;
    border-radius: 14px;
    background: rgba(255,255,255,0.86);
    display:grid;
    place-items:center;
    box-shadow: 0 18px 34px rgba(0,0,0,0.18);
    overflow:hidden;
  }
 .cardView .qrWrap img{
    width: 132px; height: 132px;
    image-rendering: pixelated;
  }

  /* Variant B (landscape look via rotation) */
 .cardView .isicCardHWrap{
    width: 100%;
    max-width: 360px;
    aspect-ratio: 0.74 / 1;
    display:flex;
    align-items:center;
    justify-content:center;
  }
 .cardView .isicCardH{
    width: 360px;
    height: 486px;
    border-radius: 28px;
    box-shadow: 0 26px 60px rgba(0,0,0,0.45);
    overflow:hidden;
    position:relative;
    border: 1px solid rgba(255,255,255,0.10);
    transform: rotate(-90deg);
    transform-origin: center center;

    background:
      linear-gradient(135deg,
        rgba(255,255,255,0.38) 0%,
        rgba(255,255,255,0.38) 18%,
        rgba(255,255,255,0.00) 18%,
        rgba(255,255,255,0.00) 100%),
      linear-gradient(180deg,
        #f1dec3 0%,
        #f1dec3 32%,
        #9adccb 32%,
        #9adccb 100%);
}
 .cardView .isicCardH::after{
    content:"";
    position:absolute; inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.10));
    pointer-events:none;
}
 .cardView .isicCardH__badge{ position:absolute; top: 18px; left: 18px; }
 .cardView .isicCardH__number{
    position:absolute;
    top: 20px; right: 20px;
    font-size: 9.5px;
    color: rgba(0,0,0,0.55);
    letter-spacing: 0.25px;
    text-align:right;
    font-weight: 700;
  }
 .cardView .isicCardH__number span{
    display:block;
    font-size: 11px;
    letter-spacing: 0.7px;
    font-weight: 900;
  }
 .cardView .isicCardH__portrait{
    position:absolute;
    top: 84px;
    left: 50%;
    transform: translateX(-50%);
    width: 132px;
    height: 132px;
    border-radius: 18px;
    background: rgba(255,255,255,0.55);
    box-shadow: 0 16px 30px rgba(0,0,0,0.16);
    display:grid;
    place-items:center;
    overflow:hidden;
  }
 .cardView .isicCardH__portrait img{
    width:100%;
    height:100%;
    object-fit:cover;
    filter: saturate(1.05) contrast(1.03);
  }
 .cardView .isicCardH__name{
    position:absolute;
    top: 226px;
    left: 22px; right: 22px;
    text-align:center;
    font-size: 24px;
    font-weight: 900;
    color: rgba(0,0,0,0.60);
    letter-spacing: 0.2px;
  }
 .cardView .isicCardH__school{
    position:absolute;
    top: 262px;
    left: 22px; right: 22px;
    text-align:center;
    font-size: 13px;
    font-weight: 800;
    color: rgba(0,0,0,0.48);
  }
 .cardView .isicCardH__meta{
    position:absolute;
    top: 320px;
    left: 24px; right: 24px;
    display:flex;
    justify-content:space-between;
    gap:16px;
  }
 .cardView .isicCardH__qr{
    position:absolute;
    bottom: 62px;
    left: 50%;
    transform: translateX(-50%);
    width: 150px; height: 150px;
    border-radius: 14px;
    background: rgba(255,255,255,0.86);
    display:grid;
    place-items:center;
    box-shadow: 0 18px 34px rgba(0,0,0,0.18);
    overflow:hidden;
  }
 .cardView .isicCardH__qr img{
    width: 132px; height: 132px;
    image-rendering: pixelated;
  }
 .cardView .cardBottom{
    height: 68px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
  }
 .cardView .dots{
    position:absolute;
    top: -2px;
    left: 50%;
    transform: translateX(-50%);
    display:flex;
    gap: 10px;
    opacity: 0.85;
  }
 .cardView .dot{width: 7px; height: 7px; border-radius: 999px; background: rgba(255,255,255,0.35);}
 .cardView .dot.is-active{ background: rgba(255,255,255,0.78); }
 .cardView .togglePill{
    width: 210px;
    height: 52px;
    border-radius: 18px;
    background: rgba(255,255,255,0.07);
    border: 1px solid rgba(255,255,255,0.10);
    box-shadow: 0 16px 34px rgba(0,0,0,0.35);
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 6px;
    box-sizing:border-box;
  }
 .cardView .pillBtn{
    width: 92px;
    height: 40px;
    border-radius: 14px;
    display:grid;
    place-items:center;
    border: 1px solid rgba(255,255,255,0.10);
    background: rgba(255,255,255,0.05);
  }
 .cardView .pillBtn.is-active{
    background: rgba(122,92,255,0.85);
    border-color: rgba(122,92,255,0.95);
    box-shadow: 0 12px 26px rgba(122,92,255,0.35);
  }
 .cardView .pillSep{ width: 1px; height: 26px; background: rgba(255,255,255,0.18); border-radius: 1px; }
 .cardView .sparkle{
    position:absolute;
    right: 14px;
    bottom: 10px;
    width: 26px; height: 26px;
    opacity: 0.75;
    filter: drop-shadow(0 8px 18px rgba(0,0,0,0.35));
  }
</style>


<div id="cardView" class="cardView" aria-hidden="true">
  <div class="cardView__safe">
    <div class="cardTopBar">
      <div class="cardTopBar__left">
        <div class="cardTopBar__back" id="cardBack" role="button" aria-label="Zpět">
          <img src="icon-back.svg" alt="" style="width:14px;height:14px;opacity:0.9" />
        </div>
        <div class="cardTopBar__dot" aria-hidden="true"></div>
        <div class="cardTopBar__status">PLATNÝ</div>
      </div>
      <div class="cardTopBar__right" id="cardNow">--</div>
    </div>

    <div class="cardCanvas">
      <div class="isicCard" id="cardVertWrap" role="img" aria-label="ISIC průkaz (varianta 1)">
        <div class="isicCard__headerBadge">
          <div class="badge">
            <div class="badge__logo">ISIC</div>
            <div>
              <div class="badge__txt1">INTERNATIONAL<br/>STUDENT</div>
              <div class="badge__txt2">IDENTITY CARD</div>
            </div>
          </div>
        </div>

        <div class="isicCard__number">
          ISIC card number
          <span>S 123 451 789 024 P</span>
        </div>

        <div class="portraitWrap">
          <img id="detailPhoto" src="portrait-placeholder.png" alt="Fotografie" />
        </div>

        <div class="isicCard__name" id="detailName">Petr Vrána</div>
        <div class="isicCard__school">Mendelova univerzita v Brně</div>

        <div class="metaRow">
          <div class="meta">
            <div class="meta__label">Platnost | Validity</div>
            <div class="meta__value">09/2024 - 12/2026</div>
          </div>
          <div class="meta" style="text-align:right">
            <div class="meta__label">Narození | Born</div>
            <div class="meta__value" id="detailDob">31. 5. 2001</div>
          </div>
        </div>

        <div class="qrWrap">
          <img src="qr.svg" alt="QR" />
        </div>
      </div>

      <div class="isicCardHWrap view--hidden" id="cardHorizWrap" aria-hidden="true">
        <div class="isicCardH" role="img" aria-label="ISIC průkaz (varianta 2)">
          <div class="isicCardH__number">
            ISIC card number
            <span>S 123 451 789 024 P</span>
          </div>

          <div class="isicCardH__badge">
            <div class="badge">
              <div class="badge__logo">ISIC</div>
              <div>
                <div class="badge__txt1">INTERNATIONAL<br/>STUDENT</div>
                <div class="badge__txt2">IDENTITY CARD</div>
              </div>
            </div>
          </div>

          <div class="isicCardH__portrait">
            <img id="detailPhoto2" src="portrait-placeholder.png" alt="Fotografie" />
          </div>

          <div class="isicCardH__name" id="detailName2">Petr Vrána</div>
          <div class="isicCardH__school">Mendelova univerzita v Brně</div>

          <div class="isicCardH__meta">
            <div class="meta">
              <div class="meta__label">Platnost | Validity</div>
              <div class="meta__value">09/2024 - 12/2026</div>
            </div>
            <div class="meta" style="text-align:right">
              <div class="meta__label">Narození | Born</div>
              <div class="meta__value" id="detailDob2">31. 5. 2001</div>
            </div>
          </div>

          <div class="isicCardH__qr">
            <img src="qr.svg" alt="QR" />
          </div>
        </div>
      </div>
    </div>

    <div class="cardBottom">
      <div class="dots" aria-hidden="true">
        <div class="dot is-active"></div>
        <div class="dot"></div>
      </div>

      <div class="togglePill" role="group" aria-label="Zobrazení">
        <div class="pillBtn is-active" id="pillA" aria-label="Varianta 1">
          <img src="icon-card-vert.svg" alt="" style="width:18px;height:18px;opacity:0.95" />
        </div>
        <div class="pillSep" aria-hidden="true"></div>
        <div class="pillBtn" id="pillB" aria-label="Varianta 2">
          <img src="icon-card-horiz.svg" alt="" style="width:18px;height:18px;opacity:0.95" />
        </div>
      </div>

      <img class="sparkle" src="icon-sparkle.svg" alt="" />
    </div>
  </div>
</div>


<script>
(function(){
  const PROFILE_KEY = "isic_profile_v1";
  const FS_KEY = "isic_fullscreen_pref_v1";
  const VAR_KEY = "isic_card_variant_v1"; // "A" or "B"

  const cardView = document.getElementById("cardView");
  const cardBack = document.getElementById("cardBack");
  const cardNow = document.getElementById("cardNow");

  const detailName = document.getElementById("detailName");
  const detailDob = document.getElementById("detailDob");
  const detailPhoto = document.getElementById("detailPhoto");

  const detailName2 = document.getElementById("detailName2");
  const detailDob2 = document.getElementById("detailDob2");
  const detailPhoto2 = document.getElementById("detailPhoto2");

  const wrapHoriz = document.getElementById("cardHorizWrap");
  const wrapVert = document.getElementById("cardVertWrap");

  const pillA = document.getElementById("pillA");
  const pillB = document.getElementById("pillB");

  function loadProfile(){
    try{
      const raw = localStorage.getItem(PROFILE_KEY);
      if(!raw) return null;
      const p = JSON.parse(raw);
      if(!p || !p.name || !p.dob || !p.photoDataUrl) return null;
      return p;
    }catch(e){ return null; }
  }

  function fmtDobSpaces(iso){
    if(!iso || !/^\d{4}-\d{2}-\d{2}$/.test(iso)) return "";
    const parts = iso.split("-");
    const y = parts[0];
    const m = String(parseInt(parts[1],10));
    const d = String(parseInt(parts[2],10));
    return d + ". " + m + ". " + y;
  }

  function applyProfileToDetail(){
    const p = loadProfile();
    if(!p) return;

    if(detailName && p.name) detailName.textContent = p.name;
    if(detailDob && p.dob) detailDob.textContent = fmtDobSpaces(p.dob);
    if(detailPhoto && p.photoDataUrl) detailPhoto.src = p.photoDataUrl;

    if(detailName2 && p.name) detailName2.textContent = p.name;
    if(detailDob2 && p.dob) detailDob2.textContent = fmtDobSpaces(p.dob);
    if(detailPhoto2 && p.photoDataUrl) detailPhoto2.src = p.photoDataUrl;
  }

  function fmtNow(){
    const d = new Date();
    const dd = String(d.getDate()).padStart(2,"0");
    const mm = String(d.getMonth()+1).padStart(2,"0");
    const yyyy = d.getFullYear();
    const hh = String(d.getHours()).padStart(2,"0");
    const mi = String(d.getMinutes()).padStart(2,"0");
    const ss = String(d.getSeconds()).padStart(2,"0");
    return dd + "-" + mm + "-" + yyyy + " | " + hh + ":" + mi + ":" + ss;
  }
  function tickClock(){
    if(cardNow) cardNow.textContent = fmtNow();
  }

  function getVariant(){
    return localStorage.getItem(VAR_KEY) === "B" ? "B" : "A";
  }
  function setVariant(v){
    localStorage.setItem(VAR_KEY, v);
    const isB = (v === "B");

    if(wrapHoriz){
      wrapHoriz.classList.toggle("view--hidden", !isB);
      wrapHoriz.setAttribute("aria-hidden", (!isB).toString());
    }
    if(wrapVert){
      wrapVert.classList.toggle("view--hidden", isB);
      wrapVert.setAttribute("aria-hidden", (isB).toString());
    }
    if(pillA) pillA.classList.toggle("is-active", !isB);
    if(pillB) pillB.classList.toggle("is-active", isB);
  }

  function openCard(){
    applyProfileToDetail();
    setVariant(getVariant());
    tickClock();
    cardView.classList.add("is-active");
    cardView.setAttribute("aria-hidden","false");
  }
  function closeCard(){
    cardView.classList.remove("is-active");
    cardView.setAttribute("aria-hidden","true");
  }

  // Hook the first "Ukázat" on home screen (Moje průkazy) without URL change
  function hookShowBtn(){
    const btns = Array.from(document.querySelectorAll("button"));
    const showBtns = btns.filter(b => (b.textContent || "").trim() === "Ukázat");
    const show = showBtns.length ? showBtns[0] : null;
    if(!show) return;
    show.addEventListener("click", (e) => { e.preventDefault(); openCard(); }, {passive:false});
  }

  if(cardBack){
    cardBack.addEventListener("click", (e) => { e.preventDefault(); closeCard(); }, {passive:false});
  }

  if(pillA){
    pillA.addEventListener("click", (e)=>{ e.preventDefault(); setVariant("A"); }, {passive:false});
  }
  if(pillB){
    pillB.addEventListener("click", (e)=>{ e.preventDefault(); setVariant("B"); }, {passive:false});
  }

  setInterval(() => {
    if(cardView.classList.contains("is-active")) tickClock();
  }, 500);

  // Fullscreen preference persistence
  function setFsPref(v){ localStorage.setItem(FS_KEY, v ? "1" : "0"); }
  const fsBtn = document.getElementById("fsToggleBtn");
  if(fsBtn){
    fsBtn.addEventListener("click", () => {
      const willBeFs = !(document.fullscreenElement);
      setFsPref(willBeFs);
    });
  }
  // do not auto-enter fullscreen (gesture required); preference is still stored

  hookShowBtn();
})();
</script>

</body>
</html>
